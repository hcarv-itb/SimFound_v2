

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Main &mdash; Simulation Foundry, v2 2.0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Legacy" href="deprecated.html" />
    <link rel="prev" title="Analysis Modules" href="source.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> Simulation Foundry, v2
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">TOPICS</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="projects.html">Usage</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="documentation.html">Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="source.html">Analysis Modules</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Main</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#project">Project</a></li>
<li class="toctree-l3"><a class="reference internal" href="#system">System</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hierarchy">Hierarchy</a></li>
<li class="toctree-l3"><a class="reference internal" href="#replicates">Replicates</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#example">Example</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="deprecated.html">Legacy</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools.html">Operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="protocols.html">Protocols</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="protein_design.html">Protein Design 2021</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Simulation Foundry, v2</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="documentation.html">Documentation</a> &raquo;</li>
        
      <li>Main</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/main.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="main">
<h1>Main<a class="headerlink" href="#main" title="Permalink to this headline">¶</a></h1>
<div class="section" id="project">
<h2>Project<a class="headerlink" href="#project" title="Permalink to this headline">¶</a></h2>
<p>A project is defined using the <strong>Project</strong> class.
Defining a <em>project</em> spawns all the simulation <em>systems</em> (with the help of <strong>Systems</strong> generator class).</p>
<p>The file structure and file names of the <em>project</em> are generated under the <strong>workdir</strong> using a hierarquical nomenclature that is used for system setup, simulation, and analysis.
The <strong>results</strong> folder defines where results from the analysis will be outputed.</p>
<p>The <strong>*Project*</strong> module accept an arbitrary number of combination of elements, and generates a tree structure of the Cartesian product of ordered set of elements in <em>hierarchy</em> (in its current implementation, can be changed to other combinatronics schemes).
The limitation resides on the required input files upon simulation execution for all the requested combinations.</p>
<p>For a protein-ligand simulation setup, with variation of some atribute of a ligand, the elements then become <strong>protein(s)</strong>, <strong>ligand(s)</strong> and ligand <strong>parameter(s)</strong>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>Other parameters can be coded.</p></li>
</ul>
</div>
</div>
<div class="section" id="system">
<h2>System<a class="headerlink" href="#system" title="Permalink to this headline">¶</a></h2>
<p>Each system is defined by a set of attributes, for example: <em>protein</em>.
Each attribute can have a undefined number of elements, for example: <a href="#id1"><span class="problematic" id="id2">*</span></a>protein*=(protein1, protein2).</p>
<p>The <strong>System</strong> class work as a system generator, and accepts requests from the <strong>Project</strong> class.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The number of attributes is not fixed, so the user can set as many as necessary.
Given the combinatorial generation of systems based, the number of attributes is recommended to be low.</p>
</div>
</div>
<div class="section" id="hierarchy">
<h2>Hierarchy<a class="headerlink" href="#hierarchy" title="Permalink to this headline">¶</a></h2>
<p>The hierarchy refers to the way systems are grouped based on the shared elements of some attribute.
By specifying the hierarchy, a tree-like structure of systems is generated.
The order of provided attributes sets the tree <strong>levels</strong>: the first attribute will be the root, and the remaining attributes will be branching points.</p>
</div>
<div class="section" id="replicates">
<h2>Replicates<a class="headerlink" href="#replicates" title="Permalink to this headline">¶</a></h2>
<p>The replicate value defines how many times each system is to be simulated.
This is an optional attribute, which when not defined reverts to the default value.</p>
<div class="section" id="example">
<h3>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h3>
<p>A concrete example of a project is the following.</p>
<dl class="simple">
<dt>Attributes:</dt><dd><ul class="simple">
<li><p>protein = protein1, protein2</p></li>
<li><p>ligand = ligand1, ligand2, ligand3</p></li>
<li><p>parameter = parameter1, parameter2, parameter3, parameter4</p></li>
<li><p>replicates (optional) = 5</p></li>
</ul>
</dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">workdir</span><span class="o">=</span><span class="n">base_path</span><span class="o">+</span><span class="s1">&#39;Root&#39;</span>
<span class="n">results</span><span class="o">=</span><span class="n">workdir</span><span class="o">+</span><span class="s2">&quot;/project_results&quot;</span>

<span class="c1">#Check for project folders and creates them if not found)</span>
<span class="n">tools</span><span class="o">.</span><span class="n">Functions</span><span class="o">.</span><span class="n">fileHandler</span><span class="p">([</span><span class="n">workdir</span><span class="p">,</span> <span class="n">results</span><span class="p">],</span> <span class="n">confirmation</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="n">protein</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;protein1&#39;</span><span class="p">,</span> <span class="s1">&#39;protein2&#39;</span><span class="p">]</span>
<span class="n">ligand</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;ligand1&#39;</span><span class="p">,</span> <span class="s1">&#39;ligand2&#39;</span><span class="p">,</span> <span class="s1">&#39;ligand3&#39;</span><span class="p">]</span>
<span class="n">parameters</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;parameter1&#39;</span><span class="p">,</span> <span class="s1">&#39;parameter2&#39;</span><span class="p">,</span> <span class="s1">&#39;parameter3&#39;</span><span class="p">,</span> <span class="p">]</span>



<span class="n">project</span><span class="o">=</span><span class="n">main</span><span class="o">.</span><span class="n">Project</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;projectTutorial&#39;</span><span class="p">,</span>
                  <span class="n">hierarchy</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;protein&#39;</span><span class="p">,</span> <span class="s1">&#39;ligand&#39;</span><span class="p">,</span> <span class="s1">&#39;parameter&#39;</span><span class="p">),</span>
                  <span class="n">workdir</span><span class="o">=</span><span class="n">workdir</span><span class="p">,</span>
                  <span class="n">parameter</span><span class="o">=</span><span class="n">parameters</span><span class="p">,</span>
                  <span class="n">replicas</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
                  <span class="n">timestep</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
                  <span class="n">protein</span><span class="o">=</span><span class="n">protein</span><span class="p">,</span>
                  <span class="n">ligand</span><span class="o">=</span><span class="n">ligand</span><span class="p">,</span>
                  <span class="n">results</span><span class="o">=</span><span class="n">results</span><span class="p">)</span>
</pre></div>
</div>
<p>project_systems=project.setSystems()</p>
<p>Which yields the following tree:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Root
├── protein1
    ├── ligand1
       ├── parameter1
               ├──replicate1
               ├──replicate2
               ├──replicate3
               ├──replicate4
               └──replicate5
       ├── parameter2
       ├── parameter3
       └── parameter4
    ├──ligand2
    └──ligand3
└──protein2
</pre></div>
</div>
<span class="target" id="module-source.main"></span><p>The core python classes of the package.
Classes are implemented in jupyter notebooks or in offline runs (optional).</p>
<p>Created on Fri Jul  3 11:30:16 2020
&#64;author: hca</p>
<dl class="py class">
<dt id="source.main.Project">
<em class="property">class </em><code class="sig-prename descclassname">source.main.</code><code class="sig-name descname">Project</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">workdir</span></em>, <em class="sig-param"><span class="n">results</span></em>, <em class="sig-param"><span class="n">title</span><span class="o">=</span><span class="default_value">'Untitled'</span></em>, <em class="sig-param"><span class="n">hierarchy</span><span class="o">=</span><span class="default_value">'protein', 'ligand', 'parameter'</span></em>, <em class="sig-param"><span class="n">parameter</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">replicas</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">protein</span><span class="o">=</span><span class="default_value">'protein'</span></em>, <em class="sig-param"><span class="n">ligand</span><span class="o">=</span><span class="default_value">'ligand'</span></em>, <em class="sig-param"><span class="n">timestep</span><span class="o">=</span><span class="default_value">Quantity(value=1, unit=picosecond)</span></em>, <em class="sig-param"><span class="n">topology</span><span class="o">=</span><span class="default_value">'system.pdb'</span></em>, <em class="sig-param"><span class="n">trajectory</span><span class="o">=</span><span class="default_value">'equilibration_NPT.xtc'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#source.main.Project" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Base class to define a project.</p>
<dl class="py method">
<dt id="source.main.Project.getProperties">
<code class="sig-name descname">getProperties</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#source.main.Project.getProperties" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if queried properties is defined in self.</p>
<dl class="simple">
<dt>property: list</dt><dd><p>Variable(s) to que queried.</p>
</dd>
</dl>
<dl class="simple">
<dt>str</dt><dd><p>The value of property, if it is defined.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="source.main.Project.setSystems">
<code class="sig-name descname">setSystems</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; dict<a class="headerlink" href="#source.main.Project.setSystems" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines project systems based on hierarchy.</p>
<dl class="simple">
<dt>systems<span class="classifier">dict</span></dt><dd><p>A dictionary of system names and instances as defined in the project (see class <cite>System</cite>).</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="source.main.System">
<em class="property">class </em><code class="sig-prename descclassname">source.main.</code><code class="sig-name descname">System</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">system</span></em>, <em class="sig-param"><span class="n">workdir</span></em>, <em class="sig-param"><span class="n">input_topology</span></em>, <em class="sig-param"><span class="n">timestep</span><span class="o">=</span><span class="default_value">Quantity(value=1, unit=picosecond)</span></em>, <em class="sig-param"><span class="n">protein</span><span class="o">=</span><span class="default_value">'protein'</span></em>, <em class="sig-param"><span class="n">ligand</span><span class="o">=</span><span class="default_value">'ligand'</span></em>, <em class="sig-param"><span class="n">parameter</span><span class="o">=</span><span class="default_value">'parameter'</span></em>, <em class="sig-param"><span class="n">parameter_dict</span><span class="o">=</span><span class="default_value">{'parameter': 0}</span></em>, <em class="sig-param"><span class="n">replicate</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">replica_name</span><span class="o">=</span><span class="default_value">'replicate'</span></em>, <em class="sig-param"><span class="n">linker</span><span class="o">=</span><span class="default_value">'-'</span></em>, <em class="sig-param"><span class="n">topology</span><span class="o">=</span><span class="default_value">'system.pdb'</span></em>, <em class="sig-param"><span class="n">trajectory</span><span class="o">=</span><span class="default_value">'equilibration_NPT.xtc'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#source.main.System" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#source.main.Project" title="source.main.Project"><code class="xref py py-class docutils literal notranslate"><span class="pre">source.main.Project</span></code></a></p>
<p>The base class to define a system. Takes as input a system tuple.
The system tuple can be accepted as a instance of the parent class or given manually.
See parent class method <cite>setSystems</cite> for details of tuple generation.</p>
<p>A tuple of the form (‘protein’, ‘ligand’, ‘parameter’) or other with permutations of the elements (hierarchical, top first).</p>
<dl class="simple">
<dt>system: tuple</dt><dd><p>The tuple representing the system.</p>
</dd>
<dt>workdir: path</dt><dd><p>The default working directory.</p>
</dd>
<dt>replica_name: str</dt><dd><p>The prefix for replicate subsfolder. The default is ‘sim’.</p>
</dd>
<dt>linker: str</dt><dd><p>The file name delimiter. The default is ‘-‘.</p>
</dd>
</dl>
<dl class="simple">
<dt>systems: obj</dt><dd><p>An instance of System.</p>
</dd>
</dl>
<dl class="py method">
<dt id="source.main.System.plot">
<em class="property">classmethod </em><code class="sig-name descname">plot</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">input_df</span></em>, <em class="sig-param"><span class="n">level</span><span class="o">=</span><span class="default_value">'l3'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#source.main.System.plot" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="source.main.Visualize">
<em class="property">class </em><code class="sig-prename descclassname">source.main.</code><code class="sig-name descname">Visualize</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">results</span></em><span class="sig-paren">)</span><a class="headerlink" href="#source.main.Visualize" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class to visualize trajectories</p>
<dl class="py method">
<dt id="source.main.Visualize.viewer">
<code class="sig-name descname">viewer</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">base_name</span><span class="o">=</span><span class="default_value">'superposed'</span></em>, <em class="sig-param"><span class="n">stride</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="headerlink" href="#source.main.Visualize.viewer" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="deprecated.html" class="btn btn-neutral float-right" title="Legacy" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="source.html" class="btn btn-neutral float-left" title="Analysis Modules" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2021, Henrique F. Carvalho

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>